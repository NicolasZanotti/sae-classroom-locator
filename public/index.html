<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SAE Classroom Locator</title>
    <script defer src="/__/firebase/7.15.5/firebase-app.js"></script>
    <script defer src="/__/firebase/7.15.5/firebase-firestore.js"></script>
    <script defer src="/__/firebase/init.js"></script>
</head>
<body>
    <h1>Hello world!!!!</h1>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const app = firebase.app();
            const db = firebase.firestore();

            if (location.hostname === "localhost") {
                db.settings({
                    host: "localhost:8080",
                    ssl: false
                })
            }

            const doc = db.collection("room").doc("OxpGXmBTZA4Ir33hivB3");
            doc.get()
                .then(
                    doc => console.log("doc: ", doc.data())
                )
                .catch(
                    error => console.error(error)
                )

            doc.onSnapshot(
                doc => console.log("snapshot: ", doc.data())
            )

            const query = db.collection("room").where('floor', '==', 0);
            query.get()
                .then(
                    roomsOnFloor => roomsOnFloor.forEach(room => {
                        console.log("each: ", room.data().name)
                    })
                )
                .catch(
                    error => console.error(error)
                )
        });
    </script>
</body>
</html>